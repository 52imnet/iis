
<style>
.emoji {
	position: relative;
    line-height: 2em;
    cursor: pointer;
    display: block;
    width: 100%;
}

.emoji li:hover, .emoji li:hover a {
    text-decoration: none !important;
    border-radius: 3px;
	background-color: #f1f2f3;
}

.emoji > ul {
    top: 0;
    background: white;
    max-height: 128px;
    overflow-y: scroll;
	display: flex;
    padding: 0.33em;
    width: 100%;
    flex-wrap: wrap;
}

.emoji ul li {
    min-width: 64px;
	float: none;
	display: list-item;
    list-style: none;
	position: relative;
    background: white;
    padding: 0.33em 0.66em;
    overflow: hidden;
}

.emoji a {
    -webkit-appearance: none;
    -moz-appearance:    none;
    background :transparent;
    appearance: none;
    border: none;
    display: block;
    cursor: pointer;
    line-height: 1.5em;
    width: 100%;
}
</style>

<div id="emoji" class="emoji" style="display:none">
    <div style="position: absolute;
    z-index: 1000;
    right: 0;
    margin: 0.5em 1em;
    text-align: center;"><a href="javascript:closeEmoji()"><i class="icon-cancel-circled"></i></a></div>
<ul>
    <li><a  href="javascript:insertEmoji('|∀ﾟ')">|∀ﾟ</a></li>
    <li><a  href="javascript:insertEmoji('(´ﾟДﾟ`)')">(´ﾟДﾟ`)</a></li>
    <li><a  href="javascript:insertEmoji('(;´Д`)')">(;´Д`)</a></li>
    <li><a  href="javascript:insertEmoji('(｀･ω･)')">(｀･ω･)</a></li>
    <li><a  href="javascript:insertEmoji('(=ﾟωﾟ)=')">(=ﾟωﾟ)=</a></li>
    <li><a  href="javascript:insertEmoji('| ω・´)')">| ω・´)</a></li>
    <li><a  href="javascript:insertEmoji('|-` )')">|-` )</a></li>
    <li><a  href="javascript:insertEmoji('|д` )')">|д` )</a></li>
    <li><a  href="javascript:insertEmoji('|ー` )')">|ー` )</a></li>
    <li><a  href="javascript:insertEmoji('|∀` )')">|∀` )</a></li>
    <li><a  href="javascript:insertEmoji('(つд⊂)')">(つд⊂)</a></li>
    <li><a  href="javascript:insertEmoji('(ﾟДﾟ≡ﾟДﾟ)')">(ﾟДﾟ≡ﾟДﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('(＾o＾)ﾉ')">(＾o＾)ﾉ</a></li>
    <li><a  href="javascript:insertEmoji('(|||ﾟДﾟ)')">(|||ﾟДﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( ﾟ∀ﾟ)')">( ﾟ∀ﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( ´∀`)')">( ´∀`)</a></li>
    <li><a  href="javascript:insertEmoji('(*´∀`)')">(*´∀`)</a></li>
    <li><a  href="javascript:insertEmoji('(*ﾟ∇ﾟ)')">(*ﾟ∇ﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('(*ﾟーﾟ)')">(*ﾟーﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('(　ﾟ 3ﾟ)')">(　ﾟ 3ﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( ´ー`)')">( ´ー`)</a></li>
    <li><a  href="javascript:insertEmoji('( ・_ゝ・)')">( ・_ゝ・)</a></li>
    <li><a  href="javascript:insertEmoji('( ´_ゝ`)')">( ´_ゝ`)</a></li>
    <li><a  href="javascript:insertEmoji('(*´д`)')">(*´д`)</a></li>
    <li><a  href="javascript:insertEmoji('(・ー・)')">(・ー・)</a></li>
    <li><a  href="javascript:insertEmoji('(・∀・)')">(・∀・)</a></li>
    <li><a  href="javascript:insertEmoji('(ゝ∀･)')">(ゝ∀･)</a></li>
    <li><a  href="javascript:insertEmoji('(〃∀〃)')">(〃∀〃)</a></li>
    <li><a  href="javascript:insertEmoji('(*ﾟ∀ﾟ*)')">(*ﾟ∀ﾟ*)</a></li>
    <li><a  href="javascript:insertEmoji('( ﾟ∀。)')">( ﾟ∀。)</a></li>
    <li><a  href="javascript:insertEmoji('( `д´)')">( `д´)</a></li>
    <li><a  href="javascript:insertEmoji('(`ε´ )')">(`ε´ )</a></li>
    <li><a  href="javascript:insertEmoji('(`ヮ´ )')">(`ヮ´ )</a></li>
    <li><a  href="javascript:insertEmoji('σ`∀´)')">σ`∀´)</a></li>
    <li><a  href="javascript:insertEmoji(' ﾟ∀ﾟ)σ')"> ﾟ∀ﾟ)σ</a></li>
    <li><a  href="javascript:insertEmoji('ﾟ ∀ﾟ)ノ')">ﾟ ∀ﾟ)ノ</a></li>
    <li><a  href="javascript:insertEmoji('(╬ﾟдﾟ)')">(╬ﾟдﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('(|||ﾟдﾟ)')">(|||ﾟдﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( ﾟдﾟ)')">( ﾟдﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('Σ( ﾟдﾟ)')">Σ( ﾟдﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( ;ﾟдﾟ)')">( ;ﾟдﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( ;´д`)')">( ;´д`)</a></li>
    <li><a  href="javascript:insertEmoji('(　д ) ﾟ ﾟ')">(　д ) ﾟ ﾟ</a></li>
    <li><a  href="javascript:insertEmoji('( ☉д⊙)')">( ☉д⊙)</a></li>
    <li><a  href="javascript:insertEmoji('(((　ﾟдﾟ)))')">(((　ﾟдﾟ)))</a></li>
    <li><a  href="javascript:insertEmoji('( ` ・´)')">( ` ・´)</a></li>
    <li><a  href="javascript:insertEmoji('( ´д`)')">( ´д`)</a></li>
    <li><a  href="javascript:insertEmoji('( -д-)')">( -д-)</a></li>
    <li><a  href="javascript:insertEmoji('(>д<)')">(&gt;д&lt;)</a></li>
    <li><a  href="javascript:insertEmoji('･ﾟ( ﾉд`ﾟ)')">･ﾟ( ﾉд`ﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('( TдT)')">( TдT)</a></li>
    <li><a  href="javascript:insertEmoji('(￣∇￣)')">(￣∇￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣3￣)')">(￣3￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣ｰ￣)')">(￣ｰ￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣ . ￣)')">(￣ . ￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣皿￣)')">(￣皿￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣艸￣)')">(￣艸￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣︿￣)')">(￣︿￣)</a></li>
    <li><a  href="javascript:insertEmoji('(￣︶￣)')">(￣︶￣)</a></li>
    <li><a  href="javascript:insertEmoji('ヾ(´ωﾟ｀)')">ヾ(´ωﾟ｀)</a></li>
    <li><a  href="javascript:insertEmoji('(*´ω`*)')">(*´ω`*)</a></li>
    <li><a  href="javascript:insertEmoji('(・ω・)')">(・ω・)</a></li>
    <li><a  href="javascript:insertEmoji('( ´・ω)')">( ´・ω)</a></li>
    <li><a  href="javascript:insertEmoji('(｀・ω)')">(｀・ω)</a></li>
    <li><a  href="javascript:insertEmoji('(´・ω・`)')">(´・ω・`)</a></li>
    <li><a  href="javascript:insertEmoji('(`・ω・´)')">(`・ω・´)</a></li>
    <li><a  href="javascript:insertEmoji('( `_っ´)')">( `_っ´)</a></li>
    <li><a  href="javascript:insertEmoji('( `ー´)')">( `ー´)</a></li>
    <li><a  href="javascript:insertEmoji('( ´_っ`)')">( ´_っ`)</a></li>
    <li><a  href="javascript:insertEmoji('( ´ρ`)')">( ´ρ`)</a></li>
    <li><a  href="javascript:insertEmoji('( ﾟωﾟ)')">( ﾟωﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('(oﾟωﾟo)')">(oﾟωﾟo)</a></li>
    <li><a  href="javascript:insertEmoji('(　^ω^)')">(　^ω^)</a></li>
    <li><a  href="javascript:insertEmoji('(｡◕∀◕｡)')">(｡◕∀◕｡)</a></li>
    <li><a  href="javascript:insertEmoji('/( ◕‿‿◕ )\')">/( ◕‿‿◕ )\</a></li>
    <li><a  href="javascript:insertEmoji('ヾ(´ε`ヾ)')">ヾ(´ε`ヾ)</a></li>
    <li><a  href="javascript:insertEmoji('(ノﾟ∀ﾟ)ノ')">(ノﾟ∀ﾟ)ノ</a></li>
    <li><a  href="javascript:insertEmoji('(σﾟдﾟ)σ')">(σﾟдﾟ)σ</a></li>
    <li><a  href="javascript:insertEmoji('(σﾟ∀ﾟ)σ')">(σﾟ∀ﾟ)σ</a></li>
    <li><a  href="javascript:insertEmoji('|дﾟ )')">|дﾟ )</a></li>
    <li><a  href="javascript:insertEmoji('┃電柱┃')">┃電柱┃</a></li>
    <li><a  href="javascript:insertEmoji('ﾟ(つд`ﾟ)')">ﾟ(つд`ﾟ)</a></li>
    <li><a  href="javascript:insertEmoji('ﾟÅﾟ )　')">ﾟÅﾟ )　</a></li>
    <li><a  href="javascript:insertEmoji('⊂彡☆))д`)')">⊂彡☆))д`)</a></li>
    <li><a  href="javascript:insertEmoji('⊂彡☆))д´)')">⊂彡☆))д´)</a></li>
    <li><a  href="javascript:insertEmoji('⊂彡☆))∀`)')">⊂彡☆))∀`)</a></li>
    <li><a  href="javascript:insertEmoji('(´∀((☆ミつ')">(´∀((☆ミつ</a></li>
</ul>
</div>

<script>
    function insertEmoji(e) {
        sel("#content").value += e;
        sel("#content").focus();
    }

    function insertMention(e) {
        var el = sel("#content");
        el.value = el.value.replace(/@\S+$/, "") + "@" + e + " ";
        el.focus();
    }

function closeEmoji() {
    sel("#emoji").style.display = 'none';
    sel("#content").focus();
}

try {
    var f = sel("#emoji").querySelector('ul li'), _this = sel("#emoji ul");
    JSON.parse(window.localStorage.getItem('presets') || '[]').filter(function(t){return t}).forEach(function(t) {
        var li = document.createElement('li');
        var a = document.createElement('a');
        li.appendChild(a);
        a.onclick = function() { insertEmoji(t + ' '); }
        a.innerText = t;
        _this.insertBefore(li, f);
    });
} catch (e) {
    console.log(window.localStorage.getItem('presets'), e);
    window.localStorage.setItem('presets', '');
}
</script>
