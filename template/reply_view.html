<div id="rv-{{.UUID}}" style="background:white;margin:0 0.5em">
    <table class="articles reply-table" style="box-shadow: 0 0 3px #ccc;position:relative;text-align:left">
        <tr>
            <td colspan=2 style="padding:0">
                <textarea
                    name=content
                    maxlength=1024
                    placeholder="正文"
                    rows={{if .ReplyTo}}6{{else}}10{{end}}
                    onkeyup="onContentObserved(this)"
                    style="padding:0.5em;border:none"></textarea>
            </td>
        </tr>

        <tr class=sep>
            <td>
                <!-- Three as a Whole -->
                <button class="gbutton" onclick="this.nextElementSibling.click()">
                    <span class=icon-picture></span><span class="pic">图片</span>
                </button>
                <input type=file style="display:none" onchange="onImageChanged(this)">
                <input type=hidden name=image64>
                <!-- Three as a Whole -->

                <style>
                    .gbutton.image {
                        height: 100px;
                        width: 100px;
                        padding: 0;
                    }
                    .gbutton.image span { display: none; }
                    .gbutton.image img {
                        display: block;
                        max-width: 100px;
                        max-height: 100px;
                        object-fit: contain;
                        border-radius: 3px;
                        margin: auto;
                    }
                    .gbutton.image .info {
                        position: absolute;
                        width: 100%;
                        height: 32px;
                        line-height: 32px;
                        top: 50%;
                        margin-top: -16px;
                        color: white;
                        background: rgba(0,0,0,0.3)
                    }
                    .post-options {
                        display: inline-block;
                        position: relative;
                    }
                    .post-options ul {
                        display: none;
                        position: absolute;
                        right: 0;
                        background: #fafbfc;
                        box-shadow: 0 1px 5px rgba(0, 0, 0, .3);
                        list-style: none;
                        text-align:left;
                    }
                    .post-options ul li {
                        padding: 0.5em 1em;
                        cursor: pointer;
                    }
                    .post-options:hover ul {
                        display: block;
                        z-index: 1000;
                    }
                    .post-options ul li:hover {
                        background: #bdf;
                    }
                </style>

            </td>
            <td class="nowrap" style="text-align:center">
                <div class="post-options">
                    <button class=gbutton>选项<i class="icon-down-dir right"></i></button>
                    <ul>
                        <li>
                            {{if .ReplyTo}}
                            <span name=notimeline onclick="$check(this)"><i class=icon-ok-circled2></i>不同步至我的时间线</span>
                            {{else}}
                            <span name=nomaster onclick="$check(this)"><i class=icon-ok-circled2></i>不同步至Master时间线</span>
                            {{end}}
                        </li>
                        <li>
                            <span name=isnsfw onclick="$check(this)"><i class=icon-ok-circled2></i>标记图片为NSFW内容</span>
                        </li>
                    </ul>
                </div>

                <button class="gbutton" onclick="onPost('{{.UUID}}', this, '{{.ReplyTo}}')">
                    {{if .ReplyTo}}回复{{else}}发布{{end}}
                </button>
            </td>
        </tr>

        <tr class=sep>
            <td colspan=2 style="padding:0">{{template "emoji.html" .UUID}}</td>
        </tr>       
    </table>
</div>
