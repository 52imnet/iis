{{template "header.html" .}}

{{if .IsCrawler}} <style> .crawler { display: initial; } .non-crawler { display: none } </style> {{end}}

<table class="articles small">
    <tr>
        {{if .SearchTerm}}
        <title>{{.SearchTerm}} 的相关发言</title>
        <th>{{.SearchTerm}} 的相关发言</th>
        {{else}}
        <title>全部主题</title>
        <th>标题</th>
        {{end}}
        <th class=nowrap>分类</th>
        <th class=nowrap>作者</th>
        <th class=nowrap>回复</th>
        <th class="nowrap state">RE</th>
        <th class="nowrap state">VE</th>
    </tr>
    {{if len .Articles}}
    {{range .Articles}}
    <tr class="row">
        <td class="row">{{template "row_tags.html" .}}</td>
        <td class="nowrap">
                {{if .Announce}}
                <b>公告</b>
                {{else}}
                <span class=mobile><b>#</b></span>{{if not .Parent}}<a href="/cat/{{.Category}}">{{.Category}}</a>{{else}}{{if eq .Author $.SearchTerm}}回复{{else}}被回复{{end}}{{end}}
            {{end}}
        </td>
        <td class="nowrap"><a href="/cat/@{{.Author}}">{{.Author}}</a></td>
        <td class="nowrap date"><span>{{.ReplyTimeString false}}</span></td>
        <td class="nowrap state">{{if .Replies}}<span>{{.Replies}}</span><span class=mobile>回复</span>{{end}}</td>
        <td class="nowrap state">{{if .Views}}<span>{{.Views}}</span><span class=mobile>浏览</span>{{end}}</td>
    </tr>
    {{if $.ShowAbstract}}
    <tr class=dark>
        <td colspan=6><div class=reply><pre>{{.ContentAbstract}}</pre></div></td>
    </tr>
    {{end}}
    {{end}}
    {{else}}
    <tr><td colspan=6>无内容</td></tr>
    {{end}}
</table>


<div class="paging" id="paging">
    {{if .Prev}}
    <a href="?n={{.Prev}}">&laquo; 上页</a>
    <a href="?n=">首页</a>
    {{end}}
    <a href="?n={{.Next}}">下页 &raquo;</a>
</div>

{{template "footer.html" .}}
